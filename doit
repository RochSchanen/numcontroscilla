#!/bin/bash

STOP_TIME="200ns"

# analyze
echo "ghdl -a ./bench/*"
ghdl -a ./bench/benchclock.vhdl
ghdl -a ./bench/benchreset.vhdl

echo "ghdl -a ./nco/*"
ghdl -a ./nco/fifobuf.vhdl
ghdl -a ./nco/addsync.vhdl
ghdl -a ./nco/plcnt.vhdl

echo "ghdl -a fpga_bench.vhdl"
ghdl -a ./fpga_bench.vhdl

# elaborate
echo "ghdl -e fpga_bench"
ghdl -e fpga_bench

# run and export
echo "run"
ghdl -r fpga_bench --stop-time=${STOP_TIME} --vcd=fpga_bench.vcd
echo "done."
